<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="CharitySystem.view.DonateController"
            prefWidth="1100" prefHeight="700">

    <top>
        <ToolBar>
            <Label text="Donate" style="-fx-font-size:18; -fx-font-weight:bold;"/>
            <Pane HBox.hgrow="ALWAYS"/>
            <Button text="Logout" onAction="#logout"/>
        </ToolBar>
    </top>

    <center>
        <VBox spacing="14">
            <padding>
                <Insets top="16" right="16" bottom="16" left="16"/>
            </padding>

            <!-- Donation form -->
            <TitledPane text="New Donation" expanded="true">
                <content>
                    <GridPane hgap="10" vgap="10" style="-fx-padding:10;">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="20"/>
                            <ColumnConstraints percentWidth="80"/>
                        </columnConstraints>

                        <Label text="Item:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <TextField fx:id="itemField" promptText="e.g., Rice, Bread"
                                   GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                        <Label text="Quantity:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        <TextField fx:id="qtyField" promptText="e.g., 5"
                                   GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                        <Label text="Address:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                        <TextField fx:id="addressField" promptText="Pickup address"
                                   GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                        <Label text="Phone:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                        <TextField fx:id="phoneField" promptText="Contact number"
                                   GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                        <Button text="Post Donation" onAction="#submitDonation"
                                GridPane.rowIndex="4" GridPane.columnIndex="1" maxWidth="160"/>
                    </GridPane>
                </content>
            </TitledPane>

            <Label fx:id="successLabel" textFill="green"/>

            <!-- Your donations -->
            <TitledPane text="Your donations" expanded="true">
                <content>
                    <VBox spacing="8" style="-fx-padding:8;">
                        <TableView fx:id="yourDonationsTable" prefHeight="380">
                            <columns>
                                <TableColumn fx:id="colItem" text="Item" prefWidth="180"/>
                                <TableColumn fx:id="colQty" text="Qty" prefWidth="80"/>
                                <TableColumn fx:id="colAddress" text="Address" prefWidth="300"/>
                                <TableColumn fx:id="colPhone" text="Phone" prefWidth="160"/>
                                <TableColumn fx:id="colStatus" text="Status" prefWidth="160"/>
                            </columns>
                        </TableView>

                        <HBox spacing="8">
                            <Button text="Mark as Collected" onAction="#markCollectedSelected">
                                <tooltip>
                                    <Tooltip text="Set status to COLLECTED for the selected donation"/>
                                </tooltip>
                            </Button>

                            <Button text="Cancel Donation" onAction="#cancelSelected">
                                <tooltip>
                                    <Tooltip text="Remove selected donation (only if PENDING)"/>
                                </tooltip>
                            </Button>

                            <Label fx:id="actionStatus" textFill="dodgerblue"/>
                        </HBox>
                    </VBox>
                </content>
            </TitledPane>
        </VBox>
    </center>
</BorderPane>
